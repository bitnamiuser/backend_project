Developer setup
===============

Ensure you have the [bitnami-djangostack-1.10.6-0](https://bitnami.com/redirect/to/144029/bitnami-djangostack-1.10.6-0-linux-x64-installer.run)
installed. Change into your install directory and then run `./use_djangostack` to ensure the
development environment is ready to use.

Grab this repository:

    $ git clone https://github.com/bitnamiuser/backend_project.git apps/django/django_projects/backend_project/
    $ cd apps/django/django_projects/backend_project
    $ python manage.py migrate
    $ python manage.py runserver

and open [http://localhost:8000](http://localhost:8000) in your browser.

The functionality differs slightly from that specified in that it allows you to
create and terminate multiple instances.

Notes on constraints
====================

While doing this exercise, I've constrained myself to use only what the Bitnami
Django-stack provides - Django 1.10 and (a very old version?) of boto.

I've also constrained myself time-wise and tried to do a minimal simple and
elegant implementation, but have not included any style, tests, UX etc. (so I
don't lose my weekend :) ).

The main files of interest are most likely:
 * [views.py](aws_launch_demo/views.py) which has two simple views - one to
   capture and store the credentials, and another to manage instances and
   provide JSON updates.
 * [forms.py](aws_launch_demo/forms.py) which validates the credentials.
 * [credential_storage.py](aws_launch_demo/credential_storage.py) which
   is in a separate module only to ensure it can be replaced with a better
   storage in the future. It also provides an `aws_credentials_required`
   decorator to simplify views.
 * [aws-instances.html](aws_launch_demo/templates/aws-instances.html) which has
   the very basic html, css and js for the minimal functionality (without frameworks etc.)


Notes for Bitnami
=================

It was quite interesting to use one of the stacks (in my case, the Django
one) and see the way it aims to streamline a development environment. A few
things I noticed along the way (sorry if I misunderstood anything here, feel
free to ignore these)
 * There is no link to the [django stack
   documentation](https://docs.bitnami.com/installer/infrastructure/django/) in
   the README.txt which is installed with the django stack. I downloaded and
   installed the stack, then read the README.txt to find out where the docs are.
 * The documentation includes a link to a sample project - with which you can
   view the working setup out of the box. But the installer makes the sample
   project both optional and customisable so it can potentially differ (not a
   huge issue, just tripped me).
 * The installer by default uses 127.0.1.1 as the allowed_hosts for the sample
   project and does *not* include localhost, so the sample project only works
   with 127.0.1.1. I'm not sure whether it's helping the developer to set
   allowed_hosts for a development setup? (given it needs to be (re)set for a
   deployment anyway).
 * The [same django stack documentation](https://docs.bitnami.com/installer/infrastructure/django/)
   has `sudo` being used for the startproject and startapp manage.py commands -
   but it looks like this might be a historical artifact? (in fact, testing
   that, using sudo doesn't work unless you happen to have django installed
   system wide, as all the env vars and `PATH` updates included by running
   `./use_djangostack` are not present for the root user:

       ```
       $ ./use_djangostack
       # Works fine as normal user
       $ django-admin startproject foo /tmp/
       # Won't work with sudo as django-admin not available
       $ sudo django-admin startproject foo /tmp/
       sudo: django-admin: command not found
       ```

 * The [How to create a new Django
   project](https://docs.bitnami.com/installer/infrastructure/django/#how-to-create-a-new-django-project)
   section of the documentation indicates that restarting apache will be enough
   to then be able to view your new project, but in my case, I had to manually
   update `apache2/conf/bitnami/bitnami-apps-prefix.conf` to include my newly
   created project and create the apache conf to which it referred (actually,
   just like the "How to deploy" section). It may be worth sticking to runserver for
   the "How to create a new Django project" section, and leaving the apache setup
   for deployment?
 * (tiny) The same section uses django.conf.urls.include which is not imported by
   default by the template generated by startproject.
 * Finally, it threw me a bit that boto 2.6 - from 2012 - is included by
   default rather than boto3 (or even latest 2.x version - 2.46.1 from this
   year). boto3 could be included together with the 2.x version without
   breaking any existing environments.
